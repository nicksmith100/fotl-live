{% extends "base.html" %}

{% block content %}
<div class="container">         
    <div class="row mt-5">
        <div class="col-12">
            <h2>Applications</h2>
        </div>


          
        <div id="new-applications" class="row mt-5">
            <h3 class="mb-3">Unapproved applications</h3>

            {% for application in new_applications %}

            <div id="{{ application.artist_name | replace(' ','') }}" class="card mx-2 mb-2 mb-lg-5 col-12 col-sm-9 col-lg-5 g-0">
                <!-- Show image if it exists-->
                {% if application.artist_img != "" %}
                <img src="{{ cloudinary_url }}{{ application.artist_img }}" alt="{{ application.artist_name }}" class="card-img-top">
                {% else %}
                <p class="card-img-top p-1">No image yet supplied</p>
                {% endif %}
                <div class="card-body">
                    <h3 class="card-title">{{ application.artist_name }}</h3>
                    <p class="artist-url">
                        <strong>More info:</strong><br>
                        {{ application.more_info }}</p>
                </div>
                <div class="card-footer">
                    <p class="text-muted mt-1">Submitted on {{ application.date_submitted }}</p>
                    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modal-confirm"
                        data-bs-url="{{ url_for('reject_application', application_id=application._id) }}" data-bs-text="Are you sure you want to reject this application?"><i
                            class="bi bi-x-circle-fill" aria-hidden="true"></i> Reject</button>
                    <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal-confirm"
                        data-bs-url="{{ url_for('approve_application', application_id=application._id) }}" data-bs-text="Are you sure you want to approve this application?"><i
                            class="bi bi-check-circle-fill" aria-hidden="true"></i> Approve</button>
                </div>
            </div>
            <div id="{{ application.artist_name| replace(' ','') }}-bio" class="card mx-2 artist-bio mb-5 col-12 col-sm-9 col-lg-5">
                <div class="card-body">
                    <h3 class="card-title">Biography</h3>
                    <p class="bio">
                        {{ application.artist_bio }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div id="approved-applications" class="row mt-5">
            <h3 class="mb-3">Approved applications</h3>

            {% for application in approved_applications %}

            <div id="{{ application.artist_name | replace(' ','') }}" class="card mx-2 mb-2 mb-lg-5 col-12 col-sm-9 col-lg-5 g-0">
                <!-- Show image if it exists-->
                {% if application.artist_img != "" %}
                <img src="{{ cloudinary_url }}{{ application.artist_img }}" alt="{{ application.artist_name }}" class="card-img-top">
                {% else %}
                <p class="card-img-top p-1">No image yet supplied</p>
                {% endif %}
                <div class="card-body">
                    <h3 class="card-title">{{ application.artist_name }}</h3>
                    <p class="artist-url">
                        <strong>More info:</strong><br>
                        {{ application.more_info }}</p>
                </div>
                <div class="card-footer">
                    <p class="text-muted mt-1">Submitted on {{ application.date_submitted }}</p>
                    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modal-confirm"
                        data-bs-url="{{ url_for('reject_application', application_id=application._id) }}" data-bs-text="Are you sure you want to reject this application?"><i
                            class="bi bi-x-circle-fill" aria-hidden="true"></i> Reject</button>
                    <a href="{{ url_for('create_profile', application_id=application._id) }}" class="btn btn-dark">Create profile</a>
                </div>
            </div>
            <div id="{{ application.artist_name| replace(' ','') }}-bio" class="card mx-2 artist-bio mb-5 col-12 col-sm-9 col-lg-5">
                <div class="card-body">
                    <h3 class="card-title">Biography</h3>
                    <p class="bio">
                        {{ application.artist_bio }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div id="rejected-applications" class="row mt-5">
            <h3 class="mb-3">Rejected applications</h3>

            {% for application in rejected_applications %}

            <div id="{{ application.artist_name | replace(' ','') }}" class="card mx-2 mb-2 mb-lg-5 col-12 col-sm-9 col-lg-5 g-0">
                <!-- Show image if it exists-->
                {% if application.artist_img != "" %}
                <img src="{{ cloudinary_url }}{{ application.artist_img }}" alt="{{ application.artist_name }}" class="card-img-top">
                {% else %}
                <p class="card-img-top p-1">No image yet supplied</p>
                {% endif %}
                <div class="card-body">
                    <h3 class="card-title">{{ application.artist_name }}</h3>
                    <p class="artist-url">
                        <strong>More info:</strong><br>
                        {{ application.more_info }}</p>
                </div>
                <div class="card-footer">
                    <p class="text-muted mt-1">Submitted on {{ application.date_submitted }}</p>
                    <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal-confirm"
                        data-bs-url="{{ url_for('approve_application', application_id=application._id) }}" data-bs-text="Are you sure you want to approve this application?"><i
                            class="bi bi-check-circle-fill" aria-hidden="true"></i> Approve</button>
                    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modal-confirm"
                        data-bs-url="{{ url_for('delete_application', application_id=application._id) }}" data-bs-text="Are you sure you want to delete this application? This action cannot be undone!"><i
                            class="bi bi-trash-fill" aria-hidden="true"></i> Delete</button>
                </div>
            </div>
            <div id="{{ application.artist_name| replace(' ','') }}-bio" class="card mx-2 artist-bio mb-5 col-12 col-sm-9 col-lg-5">
                <div class="card-body">
                    <h3 class="card-title">Biography</h3>
                    <p class="bio">
                        {{ application.artist_bio }}</p>
                </div>
            </div>
            {% endfor %}
        </div> 

    </div>

</div>
{% endblock %}